<html>
  <head>
    <title>Sign-up</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <h1> Sign-up </h1>
    <%- include("partials/errors.ejs") %>
   <form action="/sign-up" method="POST" class="register-form">

    <div class="input-form"> 
      <label for="email">Email: </label>
      <input
        type="text"
        name="email"
        id="email"
        required
      >
    </div>

<div class="input-form"> 
  <label for="password">Password: </label>
   <div class="input-icon-container">
  <input
    type="password"
    name="password"
    id="password"
    required
    minlength="3"
    pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{3,}$"
    title="Password must be at least 3 characters and contain at least one letter and one number"
  >
  <span class="toggle-password" onclick="togglePassword('password', this)">ðŸ™‰</span>
  </div>
</div>

<div class="input-form"> 
  <label for="passwordConfirmation">Confirm Password: </label>
  <div class="input-icon-container">
  <input
    type="password"
    name="passwordConfirmation"
    id="passwordConfirmation"
    required
    oninput="checkPasswordMatch()"
  >
   <span class="toggle-password" onclick="togglePassword('passwordConfirmation', this)">ðŸ™‰</span>
   </div>
</div>

    <p id="passwordError" style="color: red; display: none;">Passwords do not match.</p>
    <button type="submit">Register</button>
  </form>
   <div class="links-container"> 
  <p> Already registred? <a href="/login"> Login </a> </p> 
  <a href="/">Homepage</a>
   </div> 
</html>

<script>
  function togglePassword(fieldId, icon) {
    const input = document.getElementById(fieldId);
    if (input.type === "password") {
      input.type = "text";
      icon.textContent = "ðŸ™ˆ"; 
    } else {
      input.type = "password";
      icon.textContent = "ðŸ™‰"; 
    }
  }

  function checkPasswordMatch() {
    const password = document.getElementById('password').value;
    const confirm = document.getElementById('passwordConfirmation').value;
    const error = document.getElementById('passwordError');
    if (confirm && password !== confirm) {
      error.style.display = 'block';
    } else {
      error.style.display = 'none';
    }
  }
</script>