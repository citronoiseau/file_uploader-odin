<dialog id="upload-file-dialog">
  <form id="upload-form" method="POST" enctype="multipart/form-data">
    <h2>Upload a new file</h2>
    <div class="input-form">
      <label for="file">Upload a file:</label>
      <input type="file" id="file" name="file" required />
    </div>

    <div class="dialog-buttons">
      <button type="button" class="cancel-button" id="cancel-upload-button">
        Cancel
      </button>
      <button type="submit" class="upload-button">Upload</button>
    </div>
  </form>
</dialog>

<script>
  const addDialog = document.getElementById("upload-file-dialog");
  const closeAddBtn = addDialog.querySelector("#cancel-upload-button");

  document.querySelectorAll(".upload-file-button").forEach((btn) => {
    btn.addEventListener("click", () => {
      const folderId = btn.dataset.folderId;

      const form = addDialog.querySelector("#upload-form");
      form.action = `/folders/${folderId}/upload`;

      addDialog.showModal();
    });
  });
  closeAddBtn.addEventListener("click", () => {
    addDialog.close();
  });

  addDialog.addEventListener("cancel", () => {
    addDialog.close();
  });
</script>
